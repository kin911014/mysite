<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">
	<select id="findAll" resultType="boardvo">
		<![CDATA[
			select a.no,
				a.title, 
				a.contents, 
				a.hit,
				a.reg_date as regDate, 
				a.g_no as gNo, 
				a.o_no as oNo,
				a.depth, 
				a.user_no as userNo, 
				b.name 
				from board a, user b 
				where a.user_no = b.no
				order by a.g_no desc, a.o_no asc
		]]>
	</select>
	<insert id="insertContents" parameterType="uservo">
		<![CDATA[
			insert
				into board values( 
				null, 
				#{title}, 
				#{contents}, 
				0, 
				now(), 
				(select ifnull(max(b.g_no),0)+1 from board b), 
				1,
				0, 
				#{userNo})
		]]>
	</insert>

</mapper>
